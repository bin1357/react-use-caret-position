{"version":3,"sources":["components/Input.js","components/InputWithHook.js","../../dist/index.es.js","components/InputWithoutHook.js","components/Layout.js","App.js","index.js"],"names":["Input","React","forwardRef","_ref","ref","value","onChange","label","react_default","a","createElement","react","aria-label","type","style","fontSize","border","highlight","background","padding","fontWeight","InputWithRef","_useState","useState","_useState2","Object","slicedToArray","text","setText","_useCaretPosition","node","_a","start","setStart","_b","end","setEnd","current","setSelectionRange","updateCaret","selectionStart","selectionEnd","useCaretPosition","inputRef","maxWidth","marginBottom","components_Input","e","inputToUpperCase","target","toUpperCase","handleChange","lineHeight","role","InputWithoutHook","Layout","children","fontFamily","display","flexDirection","justifyContent","alignItems","App","components_Layout","InputWithHook","components_InputWithoutHook","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ee96a068.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\n\nconst Input = React.forwardRef(({ value, onChange, label }, ref) => (\n  <Fragment>\n    <input\n      aria-label={label}\n      type=\"text\"\n      ref={ref}\n      value={value}\n      onChange={onChange}\n      style={{ fontSize: '1.5rem', border: '1px solid black' }}\n    />\n  </Fragment>\n));\n\nexport default Input;\n","import React, { useState } from 'react';\nimport { useCaretPosition } from 'react-use-caret-position';\nimport Input from './Input';\n\nconst highlight = {\n  background: '#ffcccc',\n  padding: '2px',\n  fontWeight: '400'\n};\n\nconst InputWithRef = () => {\n  // Some sort of input state\n  const [text, setText] = useState('hello world');\n\n  // Track the caret position with the hook\n  const { start, end, ref: inputRef, updateCaret } = useCaretPosition();\n\n  const handleChange = e => {\n    // Some sort of side effect in the onChange handler\n    // which normally makes the input lose its position\n    const inputToUpperCase = e.target.value.toUpperCase();\n    setText(inputToUpperCase);\n\n    // `updateCaret` will update the selectionStart and selectionEnd\n    // values of the input\n    updateCaret();\n  };\n\n  return (\n    <div\n      style={{\n        maxWidth: '700px',\n        background: '#eee',\n        padding: '0 1rem',\n        marginBottom: '1rem'\n      }}\n    >\n      <h2 style={{ fontWeight: '400' }}>Input with useCaretPosition</h2>\n      <p>\n        start: {start}, end: {end}\n      </p>\n      <Input\n        label=\"with\"\n        ref={inputRef}\n        value={text}\n        onChange={e => handleChange(e)}\n      />\n      <p style={{ lineHeight: '24px' }}>\n        <mark style={highlight}>useCaretPosition</mark> cleverly keeps track of\n        the input <mark style={highlight}>selectionStart</mark> and{' '}\n        <mark style={highlight}>selectionEnd</mark>, so we no longer get booted\n        to the end of the input... nice!{' '}\n        <span role=\"img\" aria-label=\"sunglasses emoji\">\n          üòé\n        </span>\n        <span role=\"img\" aria-label=\"thumbs up emoji\">\n          üëç\n        </span>\n      </p>\n    </div>\n  );\n};\n\nexport default InputWithRef;\n","import { useRef, useState, useEffect } from 'react';\n\nfunction useCaretPosition() {\n  var node = useRef(null);\n\n  var _a = useState(0),\n      start = _a[0],\n      setStart = _a[1];\n\n  var _b = useState(0),\n      end = _b[0],\n      setEnd = _b[1];\n\n  var updateCaret = function updateCaret() {\n    // Get the updated caret postions from the ref passed in\n    if (node && node.current) {\n      var selectionStart = node.current.selectionStart;\n      var selectionEnd = node.current.selectionEnd; // Update the state\n\n      setStart(selectionStart);\n      setEnd(selectionEnd);\n    }\n  };\n\n  useEffect(function () {\n    // Set the caret position by setting the selection range with the\n    // most current start and end values\n    if (node && node.current) {\n      node.current.setSelectionRange(start, end);\n    }\n  });\n  return {\n    start: start,\n    end: end,\n    ref: node,\n    updateCaret: updateCaret\n  };\n}\n\nexport { useCaretPosition };","import React, { useState } from 'react';\nimport Input from '../components/Input';\n\nconst InputWithoutHook = () => {\n  // Some sort of input state\n  const [text, setText] = useState('hello world');\n\n  const handleChange = e => {\n    // Some sort of side effect in the onChange handler\n    const inputToUpperCase = e.target.value.toUpperCase();\n    setText(inputToUpperCase);\n  };\n\n  return (\n    <div\n      style={{\n        maxWidth: '700px',\n        background: '#eee',\n        padding: '0 1rem',\n        marginBottom: '1rem'\n      }}\n    >\n      <h2 style={{ fontWeight: '400' }}>Input without useCaretPosition</h2>\n      <Input label=\"without\" value={text} onChange={e => handleChange(e)} />\n      <p style={{ lineHeight: '22px' }}>\n        Since there is a side effect in the onChange handler, React loses\n        position of the caret and it jumps to the end of the input after each\n        change{' '}\n        <span role=\"img\" aria-label=\"weary emoji\">\n          üò©\n        </span>\n        <span role=\"img\" aria-label=\"thumbs down emoji\">\n          üëé\n        </span>\n      </p>\n\n      <p style={{ lineHeight: '22px' }}>\n        Try typing somewhere in the middle of the input to simulate this\n        behavior.\n      </p>\n    </div>\n  );\n};\n\nexport default InputWithoutHook;\n","import React from 'react';\n\nconst Layout = ({ children }) => (\n  <main\n    style={{\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }}\n  >\n    <h1>useCaretPosition</h1>\n    {children}\n  </main>\n);\n\nexport default Layout;\n","import React from 'react';\n\nimport InputWithHook from './components/InputWithHook';\nimport InputWithoutHook from './components/InputWithoutHook';\nimport Layout from './components/Layout';\n\nconst App = () => (\n  <Layout>\n    <InputWithHook />\n    <InputWithoutHook />\n  </Layout>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}